<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
    <meta name="theme-color" content="#f1f7fe">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>Vditor: ♏ An In-browser Markdown editor, support WYSIWYG, Instant Rendering (Typora-like) and Split View
        modes. 一款浏览器端的 Markdown 编辑器，支持所见即所得、即时渲染（类似 Typora）和分屏预览模式。</title>
    <meta name="description"
          content="Vditor 支持三种所见即所得（wysiwyg）、即时渲染（ir）、分屏预览（sv）模式，支持大纲、数学公式、脑图、图表、流程图、甘特图、时序图、五线谱、多媒体、语音阅读、标题锚点、代码高亮及复制、graphviz 渲染。"/>
    <meta property="og:description"
          content="Vditor 支持三种所见即所得（wysiwyg）、即时渲染（ir）、分屏预览（sv）模式，支持大纲、数学公式、脑图、图表、流程图、甘特图、时序图、五线谱、多媒体、语音阅读、标题锚点、代码高亮及复制、graphviz 渲染。"/>
    <meta name="twitter:description" property="og:description" itemprop="description"
          content="Vditor 支持三种所见即所得（wysiwyg）、即时渲染（ir）、分屏预览（sv）模式，支持大纲、数学公式、脑图、图表、流程图、甘特图、时序图、五线谱、多媒体、语音阅读、标题锚点、代码高亮及复制、graphviz 渲染。"/>
    <link rel="dns-prefetch" href="//cdn.jsdelivr.net/"/>
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="icon" type="image/png" href="https://cdn.jsdelivr.net/npm/vditor/src/assets/images/logo.png"/>
    <link rel="apple-touch-icon" href="https://cdn.jsdelivr.net/npm/vditor/src/assets/images/logo.png">
    <link rel="shortcut icon" type="image/x-icon" href="https://cdn.jsdelivr.net/npm/vditor/src/assets/images/logo.png">
    <meta name="copyright" content="B3log"/>
    <meta http-equiv="Window-target" content="_top"/>
    <meta property="og:locale" content="zh-cmn-Hans"/>
    <meta property="og:title"
          content="Vditor: ♏ An In-browser Markdown editor, support WYSIWYG,  Instant Rendering (Typora-like) and Split View modes. 一款浏览器端的 Markdown 编辑器，支持所见即所得、即时渲染（类似 Typora）和分屏预览模式。"/>
    <meta property="og:site_name" content="Blog-vditor"/>
    <meta property="og:url" content="https://b3log.org/vditor"/>
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:domain" content="b3log.org"/>
    <meta name="twitter:title" property="og:title" itemprop="b3lig vditor"
          content="Vditor: ♏ An In-browser Markdown editor, support WYSIWYG,  Instant Rendering (Typora-like) and Split View modes. 一款浏览器端的 Markdown 编辑器，支持所见即所得、即时渲染（类似 Typora）和分屏预览模式。"/>
    <meta name="twitter:site" content="@B3logOS"/>
    <meta name="twitter:url" content="https://b3log.org/vditor"/>
    <meta property="og:image" content="https://cdn.jsdelivr.net/npm/vditor/src/assets/images/logo.png"/>
    <meta name="twitter:image" content="https://cdn.jsdelivr.net/npm/vditor/src/assets/images/logo.png"/>
    <style>
        body {
            margin: 0;
            padding: 0 20px;
        }

        .nav {
            text-align: center;
            margin: 20px 0
        }

        a {
            color: #4285f4;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/vconsole@3.9.1/dist/vconsole.min.js"></script>



    <style type="text/css">
		html,
		body,
		#wrapper {
			height: 100%;
			width: 100%;
			margin: 0;
			padding: 0;
			border: 0;
		}

		table#wrapper {
			height: 75%;
		}

		#wrapper td {
			vertical-align: middle;
			text-align: center;
			cursor: pointer;
		}

		iframe {
			border: 0;
			position: fixed;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			width: 100%;
			height: 100%
		}
	</style>
	<script type="text/javascript">
		var editor = 'https://embed.diagrams.net/?embed=1&ui=min&spin=1&proto=json&configure=1';
		var initial = null;
		var name = null;

		function edit(elt) {
			var iframe = document.createElement('iframe');
			iframe.setAttribute('frameborder', '0');

			var close = function () {
				window.removeEventListener('message', receive);
				document.body.removeChild(iframe);
			};

			var draft = localStorage.getItem('.draft-' + name);

			if (draft != null) {
				draft = JSON.parse(draft);

				if (!confirm("A version of this page from " + new Date(draft.lastModified) + " is available. Would you like to continue editing?")) {
					draft = null;
				}
			}

			var receive = function (evt) {
				if (evt.data.length > 0) {
					var msg = JSON.parse(evt.data);
					// If configure=1 URL parameter is used the application
					// waits for this message. For configuration options see
					// https://desk.draw.io/support/solutions/articles/16000058316
					if (msg.event == 'configure') {
						// Configuration example
						iframe.contentWindow.postMessage(JSON.stringify({
							action: 'configure',
							config: { defaultFonts: ["Humor Sans", "Helvetica", "Times New Roman"] }
						}), '*');
					}
					else if (msg.event == 'init') {
						if (draft != null) {
							iframe.contentWindow.postMessage(JSON.stringify({
								action: 'load',
								autosave: 1, xml: draft.xml
							}), '*');
							iframe.contentWindow.postMessage(JSON.stringify({
								action: 'status',
								modified: true
							}), '*');
						}
						else {
							// Avoids unescaped < and > from innerHTML for valid XML
							var svg = new XMLSerializer().serializeToString(elt.firstChild);
							iframe.contentWindow.postMessage(JSON.stringify({
								action: 'load',
								autosave: 1, xml: svg
							}), '*');
						}
					}
					else if (msg.event == 'export') {
						// Extracts SVG DOM from data URI to enable links
						var svg = atob(msg.data.substring(msg.data.indexOf(',') + 1));
						elt.innerHTML = svg;
						localStorage.setItem(name, JSON.stringify({ lastModified: new Date(), data: svg }));
						localStorage.removeItem('.draft-' + name);
						draft = null;
						close();
					}
					else if (msg.event == 'autosave') {
						localStorage.setItem('.draft-' + name, JSON.stringify({ lastModified: new Date(), xml: msg.xml }));
					}
					else if (msg.event == 'save') {
						iframe.contentWindow.postMessage(JSON.stringify({
							action: 'export',
							format: 'xmlsvg', xml: msg.xml, spin: 'Updating page'
						}), '*');
						localStorage.setItem('.draft-' + name, JSON.stringify({ lastModified: new Date(), xml: msg.xml }));
					}
					else if (msg.event == 'exit') {
						localStorage.removeItem('.draft-' + name);
						draft = null;
						close();
					}
				}
			};

			window.addEventListener('message', receive);
			iframe.setAttribute('src', editor);
			document.body.appendChild(iframe);
		};

		function load() {
			initial = document.getElementById('diagram').innerHTML;
			start();
		};

		function start() {
			name = (window.location.hash.length > 1) ? window.location.hash.substring(1) : 'default';
			var current = localStorage.getItem(name);

			if (current != null) {
				var entry = JSON.parse(current);
				document.getElementById('diagram').innerHTML = entry.data;
			}
			else {
				document.getElementById('diagram').innerHTML = initial;
			}
		};

		window.addEventListener('hashchange', start);
	</script>

</head>
<body>
<div>ddddddd</div>
<div>
    <table id="wrapper">
		<tr>
			<td id="diagram" title="Double click to edit" ondblclick="edit(this);">
               </td>
		</tr>
	</table>
</div>
<div id="vditor">
<h1>Vditor</h1>
<ul>
    <li>foo</li>
    <li>bar</li>
</ul>
</div>
</body>
</html>